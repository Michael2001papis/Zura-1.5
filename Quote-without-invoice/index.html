<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>הצעת מחיר ללא חשבונית</title>
  <link rel="stylesheet" href="../CSS/common.css">
  <style>
    * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
  background-color: #f7f7f7;
  color: #333;
  line-height: 1.6;
  padding: 0;
  overflow-x: hidden; /* מניעת גלילה אופקית */
}

/* כותרת וניווט עליון */
.page-header {
  background: linear-gradient(135deg, #2c3e50, #34495e);
  color: #fff;
  padding: 22px 12px;
  text-align: center;
  box-shadow: 0 4px 16px rgba(0,0,0,0.08);
}
.page-header h1 { font-size: 1.6rem; margin-bottom: 8px; }
.page-header nav { display: flex; justify-content: center; flex-wrap: wrap; gap: 8px; }
.page-header nav a { text-decoration: none; }
.page-header nav a button {
  background: #555; color: #fff; border: none; border-radius: 22px;
  padding: 8px 14px; cursor: pointer; transition: background .25s ease, transform .2s ease; white-space: normal;
}
.page-header nav a button:hover { background:#777; transform: translateY(-1px); }

.container {
  max-width: 1100px;
  margin: 16px auto;
  background-color: #ffffff;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  padding: 24px;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  border-bottom: 2px solid #eaeaea;
  padding-bottom: 10px;
}

.date { font-size: 16px; color: #7d7d7d; font-weight: 400; }

.quote-number { font-size: 20px; color: #333; font-weight: bold; }

.business-info p {
  font-size: 16px;
  color: #555;
  margin: 12px 0;
}

.business-info strong { font-weight: bold; color: #333; }

input, textarea {
  width: 100%;
  padding: 12px;
  margin: 10px 0;
  border: 1px solid #ccc;
  border-radius: 10px;
  font-size: 16px;
  background-color: #fafafa;
  color: #333;
}

input:focus, textarea:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 4px rgba(102,126,234,.12);
  background-color: #fff;
}

textarea { resize: vertical; min-height: 100px; }

label { font-size: 16px; margin-bottom: 6px; color: #444; display: block; font-weight: 600; }

hr { border: 0; height: 1px; background-color: #f0f0f0; margin: 20px 0; }

.quote-info, .additional-notes, .signature, .payment-terms { margin-bottom: 20px; }

h2 { font-size: 22px; color: #333; margin-bottom: 12px; font-weight: bold; }

.buttons { display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; margin-top: 8px; }

button { /* העיצוב החדש מוגדר ב-common.css */ text-transform: uppercase; white-space: normal; }

button:disabled { background-color: #d3d3d3; cursor: not-allowed; }

.signature #clientSignature {
  width: 100%; height: 120px; border: 2px dashed #ccc; border-radius: 8px; text-align: center; padding: 30px 0; margin: 10px 0; font-size: 16px; color: #777;
}

.signature input { background-color: #fafafa; padding: 12px; border-radius: 10px; margin-bottom: 10px; border: 1px solid #ddd; }
.signature input:focus { background-color: #fff; border-color: #667eea; box-shadow: 0 0 0 4px rgba(102,126,234,.12); }

/* רספונסיביות */
@media (max-width: 768px) {
  .container { padding: 16px; margin: 12px; }
  header { flex-direction: column; text-align: center; gap: 6px; }
  .buttons { flex-direction: column; align-items: stretch; }
  .buttons button { width: 100%; }
  .quote-info, .signature, .payment-terms { margin-bottom: 16px; }
}

@media (max-width: 480px) {
  .page-header h1 { font-size: 1.3rem; }
  .page-header { padding: 16px 10px; }
  .container { padding: 14px; }
  input, textarea { font-size: 15px; padding: 10px; }
  label { font-size: 15px; }
}

/* התאמה ממוקדת ל-Galaxy S20 Ultra (390–420px) */
@media (min-width: 390px) and (max-width: 420px) {
  .page-header nav { gap: 6px; }
  .page-header nav a { flex: 1 1 calc(50% - 6px); display: flex; justify-content: center; }
  .page-header nav a button { width: 100%; padding: 6px 10px; font-size: .92rem; }
  .container { margin: 10px; padding: 12px; border-radius: 12px; }
  header { gap: 4px; }
  .buttons { gap: 8px; }
}
  </style>
</head>
<body>

  <div class="page-header">
    <h1>הצעת מחיר ללא חשבונית</h1>
    <nav>
      <a href="../index.html"><button>עמוד הבית</button></a>
      <a href="../GeneralProjectsPage/index.html"><button>פרויקטים</button></a>
      <a href="../Contact/index.html"><button>צור קשר</button></a>
      <a href="../Developerrights/index.html"><button>זכויות המפתח</button></a>
    </nav>
  </div>

  <div class="container">
    <header>
      <div class="date" id="currentDate"></div>
      <div class="quote-number">
        <strong>מספר הצעת מחיר:</strong> <span id="quoteNumber">12345</span>
      </div>
    </header>
    
    <div class="business-info">
      <p><strong>שם העסק:</strong> מ.פ. פרויקטים</p>
      <p><strong>מספר עסק:</strong> <input type="text" id="businessNumber" placeholder="הכנס מספר עסק"></p>
      <p><strong>כתובת:</strong> גולדברג הנדבון 14, רשל"צ</p>
      <p><strong>טלפון:</strong> 054-582-0008</p>
      <p><strong>אימייל:</strong> Zurapapismedov@gmail.com</p>
    </div>
    
    <hr>
    
    <div class="quote-info">
      <label for="quoteTitle">כותרת ההצעה:</label>
      <input type="text" id="quoteTitle" placeholder="הכנס כותרת">
    
      <label for="quoteText">מלל נלווה להסבר:</label>
      <textarea id="quoteText" rows="3" placeholder="הכנס מלל נלווה"></textarea>
    
      <label for="recipient">לכבוד:</label>
      <input type="text" id="recipient" placeholder="שם מקבל ההצעה">
    
      <label for="recipientEmail">כתובת המייל:</label>
      <input type="email" id="recipientEmail" placeholder="הכנס כתובת מייל">
    </div>
    
    <div class="additional-notes">
      <label for="notes">הערות נוספות:</label>
      <textarea id="notes" rows="3" placeholder="הכנס הערות במידת הצורך"></textarea>
    </div>
    
    <div class="buttons">
      <button id="shareQuoteButton" class="print-btn">שתף הצעת מחיר</button>
    </div>
    
    <div class="signature">
      <label for="closing">בברכה,</label>
      <input type="text" id="closing" placeholder="הכנס משפט סיום">
      
      <label for="clientPhone">טלפון:</label>
      <input type="text" id="clientPhone" placeholder="הכנס טלפון">
      
      <label for="clientName">שם לקוח:</label>
      <input type="text" id="clientName" placeholder="הכנס שם לקוח">
      
      <label for="clientSignature">חתימת הלקוח:</label>
      <div id="clientSignature" style="border:1px solid #ccc; padding: 10px; border-radius: 8px;">
        <p>הלקוח חותם כאן</p>
      </div>
    </div>
    
    <div class="buttons">
      <button id="shareSignatureButton" class="quote-btn">שתף פרטי לקוח וחתימה</button>
    </div>
    
    <div class="payment-terms">
      <h2>תנאי התשלום</h2>
      <p>לפני תחילת העבודה: <input type="text" id="paymentBefore" placeholder="20% או ערך אחר"></p>
      <p>עם סיום העבודה: <input type="text" id="paymentAfter" placeholder="80% או ערך אחר"></p>
      <p>אופן התשלום: <input type="text" id="paymentMethod" placeholder="מזומן, העברה בנקאית, צ'ק וכו'"></p>
      <p>ביטול העבודה: <input type="text" id="paymentCancellation" placeholder="תנאים לביטול"></p>
      <p>תוקף ההצעה עד: <input type="text" id="paymentExpiration" placeholder="תאריך"></p>
      <p>חתימה: <input type="text" id="paymentSignature" placeholder="חתימה"></p>
    </div>
    
    <div class="buttons">
      <button id="sharePaymentButton" class="home-btn">שתף תנאי תשלום</button>
    </div>
    
    <div class="buttons">
      <button id="shareButton" class="print-btn">שתף</button>
      <button id="printButton" class="print-btn">הדפס</button>
      <button id="homeButton" class="home-btn">עמוד הבית</button>
      <button id="resetButton" class="reset-btn">איפוס</button>
    </div>
  </div>

  <script>
    // עדכון תאריך נוכחי
  document.getElementById("currentDate").textContent = new Date().toLocaleDateString("he-IL");

// עדכון מספר הצעת מחיר
document.getElementById("quoteNumber").textContent = generateQuoteNumber();

// פונקציה להפקת מספר הצעת מחיר דינמי
function generateQuoteNumber() {
  const randomNum = Math.floor(Math.random() * 10000) + 10000;  // הפקת מספר אקראי בן 5 ספרות
  return randomNum;
}

// אפשרות לעדכון מספר העסק (באמצעות קלט מהמשתמש)
document.getElementById("businessNumber").addEventListener("input", (event) => {
  console.log("מספר העסק עודכן ל: " + event.target.value);
});

    // כפתור "שתף הצעת מחיר"
  document.getElementById("shareQuoteButton").addEventListener("click", () => {
    const quoteTitle = document.getElementById("quoteTitle").value;
    const quoteText = document.getElementById("quoteText").value;
    const recipient = document.getElementById("recipient").value;
    const recipientEmail = document.getElementById("recipientEmail").value;
    const notes = document.getElementById("notes").value;

    const subject = "הצעת מחיר";
    const body = `
      שלום ${recipient},

      אני שולח לך את הצעת המחיר עם פרטי ההסבר:

      כותרת ההצעה: ${quoteTitle}
      מלל נלווה להסבר: ${quoteText}

      הערות נוספות: ${notes}

      תודה,
      [שם שלך]
    `;
    window.location.href = `mailto:${recipientEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
  });

    // כפתור "שתף פרטי לקוח וחתימה"
  document.getElementById("shareSignatureButton").addEventListener("click", () => {
    const closingMessage = document.getElementById("closing").value;
    const clientPhone = document.getElementById("clientPhone").value;
    const clientName = document.getElementById("clientName").value;
    const clientSignature = document.getElementById("clientSignature").innerText;
    
    const recipientEmail = document.getElementById("recipientEmail").value;
    const subject = "פרטי הלקוח והחתימה";
    const body = `
      שלום,
      
      אני שולח לך את פרטי הלקוח והחתימה:

      בברכה: ${closingMessage}
      טלפון: ${clientPhone}
      שם לקוח: ${clientName}
      חתימת הלקוח: ${clientSignature}
    `;
    window.location.href = `mailto:${recipientEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
  });

    // כפתור "שתף תנאי תשלום"
  document.getElementById("sharePaymentButton").addEventListener("click", () => {
    const beforeWork = document.getElementById("paymentBefore").value;
    const afterWork = document.getElementById("paymentAfter").value;
    const paymentMethod = document.getElementById("paymentMethod").value;
    const cancellationPolicy = document.getElementById("paymentCancellation").value;
    const expirationDate = document.getElementById("paymentExpiration").value;
    const clientSignature = document.getElementById("paymentSignature").value;
    
    const recipientEmail = document.getElementById("recipientEmail").value;
    const subject = "תנאי תשלום";
    const body = `
      שלום,
      
      אני שולח לך את תנאי התשלום עבור ההצעה:

      לפני תחילת העבודה: ${beforeWork}
      עם סיום העבודה: ${afterWork}
      אופן התשלום: ${paymentMethod}
      ביטול העבודה: ${cancellationPolicy}
      תוקף ההצעה עד: ${expirationDate}
      חתימה: ${clientSignature}
    `;
    window.location.href = `mailto:${recipientEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
  });
    
  document.getElementById("shareButton").addEventListener("click", () => {
    const recipientEmail = document.getElementById("recipientEmail").value;
    const subject = "הצעת מחיר";
    const body = `
      שלום,
      
      אני שולח לך את הצעת המחיר המבוקשת. אנא עיין בה ומידע נוסף יכול להימסר בהמשך.
      
      מספר הצעת מחיר: ${document.getElementById("quoteNumber").textContent}
      שם העסק: מ.פ. פרויקטים
      כתובת: גולדברג הנדבון 14, רשל"צ
      טלפון: 054-582-0008
      אימייל: Zurapapismedov@gmail.com

      ${document.getElementById("quoteText").value}
    `;
    window.location.href = `mailto:${recipientEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
  });

  // כפתורי מערכת
  document.getElementById("printButton").addEventListener("click", () => { window.print(); });
  document.getElementById("homeButton").addEventListener("click", () => { window.location.href = "../index.html"; });
  document.getElementById("resetButton").addEventListener("click", () => { location.reload(); });
  </script>
</body>
</html>
